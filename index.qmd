---
title: "Stablecoin Market Cap Visualization"
format:
  html:
    code-fold: true
    page-layout: full
    theme: cosmo
jupyter: python3
---

{{< include _dashboard_content.qmd >}}

### üìà Interactive Charts

::: {layout-ncol=2}

```{python}
#| title: Market Cap History
import pandas as pd
import plotly.express as px

# Load data
df = pd.read_csv("data/stablecoin_marketcap.csv")

# Ensure date is datetime
df["date"] = pd.to_datetime(df["date"])

# Line Plot
fig = px.line(df, x="date", y="market_cap", color="coin_name", title="Stablecoin Market Cap Over Time")
fig.show()
```

```{python}
#| title: Market Dominance
# Get latest date
latest_date = df['date'].max()
latest_df = df[df['date'] == latest_date].copy()

# Sort by market cap descending
latest_df = latest_df.sort_values(by='market_cap', ascending=False)

# Pie Chart
fig_pie = px.pie(latest_df, values='market_cap', names='coin_name', title=f'Market Dominance ({latest_date.strftime("%Y-%m-%d")})')
fig_pie.show()
```


:::

### üóûÔ∏è News Archive

```{python}
#| echo: false
#| output: asis
import pandas as pd
from IPython.display import Markdown
import os

archive_path = 'data/news_archive.csv'

if os.path.exists(archive_path):
    df_news = pd.read_csv(archive_path)
    
    # Process if data exists
    if not df_news.empty:
         # Ensure datetime
        df_news['published_dt'] = pd.to_datetime(df_news['published_dt'])
        df_news = df_news.sort_values(by='published_dt', ascending=False)
        
        # Create clickable title
        df_news['Article'] = df_news.apply(lambda x: f"[{x['title']}]({x['link']})", axis=1)
        
        # Select and Rename columns
        df_table = df_news[['published', 'Article']].copy()
        df_table.columns = ['Published Date', 'Article']
        
        # Display as Markdown Table
        print(df_table.to_markdown(index=False))
    else:
        print("No archived news available.")
else:
    print("News archive file not found.")
```

